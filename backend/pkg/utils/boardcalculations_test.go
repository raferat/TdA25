package utils_test

import (
	"testing"

	. "tdaserver/pkg/utils"
)

func TestOpening(t *testing.T) {
	res := CalculateGameState([][]string{
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
	})
	if res != "opening" {
		t.FailNow()
	}

	res = CalculateGameState([][]string{
		{"", "", "", "", "", "", "X", "O", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "X", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "X", "O", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "O", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "X", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
	})
	if res != "opening" {
		t.Log("Res: ", res)
		t.FailNow()
	}
}

func TestMidgame(t *testing.T) {
	res := CalculateGameState([][]string{
		{"", "", "", "", "", "", "X", "O", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "X", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "X", "O", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "O", "", "", "", "O", "", "", ""},
		{"", "", "", "", "", "", "X", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "X", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "O", "", "", "", "", "O", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "O", "", "", "", "", "", "", "", "", "", ""},
		{"", "", "", "", "", "", "", "", "", "", "", "", "X", "", ""},
		{"", "", "", "X", "", "", "", "", "O", "", "", "", "", "", ""},
	})
	if res != "midgame" {
		t.Log("Res: ", res)
		t.FailNow()
	}
}
